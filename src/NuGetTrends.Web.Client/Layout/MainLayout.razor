@inherits LayoutComponentBase
@inject IToastService ToastService

<BlazoredToasts Position="ToastPosition.BottomRight"
                Timeout="5"
                IconType="IconType.FontAwesome"
                SuccessIcon="fa fa-check"
                ErrorIcon="fa fa-times"
                InfoIcon="fa fa-info"
                WarningIcon="fa fa-exclamation-triangle" />

<ThemeToggle />

<div class="site-content">
    <section class="hero search-pattern is-primary">
        <div class="hero-body main-header">
            <div class="container">
                <div class="columns">
                    <div class="column has-text-centered is-12">
                        <a href="/">
                            <img src="images/logo-inverted-400.png" alt="NuGet Trends brand logo" />
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <ErrorBoundary @ref="_errorBoundary">
        <ChildContent>
            @Body
        </ChildContent>
        <ErrorContent>
            <section class="hero is-white hero-space">
                <div class="hero-body">
                    <div class="container has-text-centered">
                        <h1 class="title is-2">Something went wrong</h1>
                        <p class="subtitle">An unexpected error occurred. Please try again.</p>
                        <button class="button is-primary is-medium" @onclick="ResetError">Try Again</button>
                    </div>
                </div>
            </section>
        </ErrorContent>
    </ErrorBoundary>
</div>

<Footer />
<LoadingIndicator />

@code {
    private ErrorBoundary? _errorBoundary;

    private void ResetError() => _errorBoundary?.Recover();
}
